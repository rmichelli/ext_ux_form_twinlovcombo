Original code from http://www.sencha.com/forum/showthread.php?55191

master branch is current 3.3.3 version
extjs-2-2 branch is last working 2.2 version
