Original code from http://www.sencha.com/forum/showthread.php?55191
